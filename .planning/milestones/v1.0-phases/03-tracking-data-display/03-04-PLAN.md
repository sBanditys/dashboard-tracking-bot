---
phase: 03-tracking-data-display
plan: 04
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/components/tracking/account-card.tsx
  - src/components/tracking/account-card-skeleton.tsx
  - src/components/tracking/post-card.tsx
  - src/components/tracking/post-card-skeleton.tsx
  - src/components/tracking/index.ts
autonomous: true

must_haves:
  truths:
    - "Account cards show platform, username, brand, status"
    - "Account cards expand inline when clicked"
    - "Post cards show author, timestamp, content preview"
    - "Post cards expand to show full content and metrics"
    - "Skeleton cards match the visual structure of real cards"
  artifacts:
    - path: "src/components/tracking/account-card.tsx"
      provides: "Expandable account card component"
      exports: ["AccountCard"]
    - path: "src/components/tracking/account-card-skeleton.tsx"
      provides: "Loading skeleton for account cards"
      exports: ["AccountCardSkeleton"]
    - path: "src/components/tracking/post-card.tsx"
      provides: "Expandable post card component"
      exports: ["PostCard"]
    - path: "src/components/tracking/post-card-skeleton.tsx"
      provides: "Loading skeleton for post cards"
      exports: ["PostCardSkeleton"]
  key_links:
    - from: "src/components/tracking/account-card.tsx"
      to: "src/components/platform-icon.tsx"
      via: "PlatformIcon import"
      pattern: "import.*PlatformIcon.*from"
    - from: "src/components/tracking/post-card.tsx"
      to: "src/types/tracking.ts"
      via: "Post type import"
      pattern: "import.*Post.*from.*types/tracking"
---

<objective>
Create card components for displaying accounts and posts.

Purpose: Build the expandable card components that replace the table-based views. Cards follow CONTEXT.md decisions for inline expansion, content preview, and status display.

Output: AccountCard, PostCard, and their skeleton loading states in src/components/tracking/.
</objective>

<execution_context>
@/Users/gabrielleal/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gabrielleal/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-tracking-data-display/03-CONTEXT.md
@.planning/phases/03-tracking-data-display/03-RESEARCH.md

# Use PlatformIcon from Plan 01
@src/components/platform-icon.tsx

# Types for accounts and posts
@src/types/tracking.ts

# Existing skeleton component for patterns
@src/components/ui/skeleton.tsx
@src/lib/utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AccountCard component</name>
  <files>
    src/components/tracking/account-card.tsx
  </files>
  <action>
Create src/components/tracking/account-card.tsx:

1. Accept Account type from @/types/tracking
2. Display in collapsed state:
   - PlatformIcon on left
   - Username (clickable link to profile)
   - Brand name
   - Verification status badge
3. Expandable on click (CSS Grid animation per RESEARCH.md Pattern 3)
4. Expanded state shows:
   - Group name (if any)
   - Created date
   - Refresh schedule (if enabled)
   - Verified date (if verified)
5. Use button element for accessibility (aria-expanded)
6. Border hover effect (border-accent-purple/50)
7. Focus ring for keyboard navigation

Card layout (collapsed):
```
[Platform] @username          Brand       [Status Badge]
```

Expanded content:
```
Group: Marketing Team
Added: Jan 15, 2026
Refresh: Every 4 hours (next: 2:30 PM)
Verified: Jan 16, 2026
```

CSS Grid expansion pattern:
```tsx
<div className={cn(
  'grid transition-all duration-200',
  isExpanded ? 'grid-rows-[1fr] opacity-100 mt-4' : 'grid-rows-[0fr] opacity-0'
)}>
  <div className="overflow-hidden">
    {/* expanded content */}
  </div>
</div>
```
  </action>
  <verify>
- Card renders with all account fields
- Click expands/collapses with smooth animation
- Link to profile opens in new tab
  </verify>
  <done>AccountCard displays account info with expandable details</done>
</task>

<task type="auto">
  <name>Task 2: Create PostCard component</name>
  <files>
    src/components/tracking/post-card.tsx
  </files>
  <action>
Create src/components/tracking/post-card.tsx:

1. Accept Post type from @/types/tracking
2. Display in collapsed state:
   - PlatformIcon on left
   - Author handle (link to post URL)
   - Posted timestamp (relative or absolute)
   - Status badge with color per status
   - Brand/group if available
3. Expandable on click
4. Expanded state shows:
   - Full metrics (views, likes, comments, shares)
   - Status reason (if failed)
   - Last checked timestamp
   - Link to view original post
5. Number formatting for metrics (1K, 1.2M, etc)
6. Status colors from existing posts page:
   - done/verified: green
   - pending: yellow
   - processing: blue
   - failed: red

Card layout (collapsed):
```
[Platform] @author     Brand    [Status]    Jan 15, 2:30 PM
```

Expanded content:
```
Views: 12.5K    Likes: 1.2K    Comments: 45    Shares: 23
Last checked: 5 minutes ago
[View Original Post ->]
```

Reuse formatNumber helper (extract from posts/page.tsx):
```tsx
function formatNumber(num: number | null): string {
  if (num === null) return '-'
  if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`
  if (num >= 1000) return `${(num / 1000).toFixed(1)}K`
  return num.toString()
}
```
  </action>
  <verify>
- Card renders with all post fields
- Metrics format correctly (K, M suffixes)
- Status shows correct color
- Expansion animation smooth
  </verify>
  <done>PostCard displays post info with expandable metrics</done>
</task>

<task type="auto">
  <name>Task 3: Create skeleton components and barrel export</name>
  <files>
    src/components/tracking/account-card-skeleton.tsx
    src/components/tracking/post-card-skeleton.tsx
    src/components/tracking/index.ts
  </files>
  <action>
1. Create src/components/tracking/account-card-skeleton.tsx:
   - Match AccountCard layout structure
   - Use Skeleton component from @/components/ui/skeleton
   - Accept count prop to render multiple
   - Animate pulse effect

```tsx
interface AccountCardSkeletonProps {
  count?: number
}

export function AccountCardSkeleton({ count = 1 }: AccountCardSkeletonProps) {
  return (
    <>
      {Array.from({ length: count }).map((_, i) => (
        <div key={i} className="bg-surface border border-border rounded-lg p-4">
          <div className="flex items-center gap-4">
            <Skeleton className="w-10 h-10 rounded-full" />
            <div className="flex-1 space-y-2">
              <Skeleton className="h-4 w-32" />
              <Skeleton className="h-3 w-24" />
            </div>
            <Skeleton className="h-6 w-20 rounded" />
          </div>
        </div>
      ))}
    </>
  )
}
```

2. Create src/components/tracking/post-card-skeleton.tsx:
   - Match PostCard layout structure
   - Similar pattern with count prop

3. Create src/components/tracking/index.ts barrel export:
```tsx
export { AccountCard } from './account-card'
export { AccountCardSkeleton } from './account-card-skeleton'
export { PostCard } from './post-card'
export { PostCardSkeleton } from './post-card-skeleton'
```
  </action>
  <verify>
- Skeletons render with pulse animation
- count prop generates multiple skeletons
- All components export from @/components/tracking
  </verify>
  <done>Skeleton loading states and barrel exports complete</done>
</task>

</tasks>

<verification>
1. Run `npm run build` - no TypeScript errors
2. Cards expand/collapse with smooth animation
3. Skeletons match card visual structure
4. All components importable from @/components/tracking
</verification>

<success_criteria>
- AccountCard shows platform, username, brand, status
- AccountCard expands to show group, dates, refresh info
- PostCard shows author, timestamp, status, brand
- PostCard expands to show metrics and view link
- Skeletons provide visual loading feedback
- CSS Grid animation smooth (no layout jank)
</success_criteria>

<output>
After completion, create `.planning/phases/03-tracking-data-display/03-04-SUMMARY.md`
</output>
