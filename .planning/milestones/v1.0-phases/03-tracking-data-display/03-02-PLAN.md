---
phase: 03-tracking-data-display
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/components/filters/filter-bar.tsx
  - src/components/filters/search-input.tsx
  - src/components/filters/platform-select.tsx
  - src/components/filters/date-range-picker.tsx
  - src/components/filters/page-size-select.tsx
  - src/components/filters/index.ts
autonomous: true

must_haves:
  truths:
    - "Filter bar stays visible when scrolling"
    - "Search input triggers filter after debounce delay"
    - "Platform dropdown shows all 4 platforms plus All option"
    - "Date range picker allows selecting start and end dates"
    - "Page size selector offers 25, 50, 100 options"
  artifacts:
    - path: "src/components/filters/filter-bar.tsx"
      provides: "Sticky container for filter controls"
      exports: ["FilterBar"]
    - path: "src/components/filters/search-input.tsx"
      provides: "Debounced search input"
      exports: ["SearchInput"]
    - path: "src/components/filters/platform-select.tsx"
      provides: "Headless UI platform dropdown"
      exports: ["PlatformSelect"]
    - path: "src/components/filters/date-range-picker.tsx"
      provides: "Date range selection calendar"
      exports: ["DateRangePicker"]
    - path: "src/components/filters/page-size-select.tsx"
      provides: "Page size selector dropdown"
      exports: ["PageSizeSelect"]
  key_links:
    - from: "src/components/filters/search-input.tsx"
      to: "src/hooks/use-debounce.ts"
      via: "useDebounce hook import"
      pattern: "import.*useDebounce.*from.*use-debounce"
    - from: "src/components/filters/platform-select.tsx"
      to: "@headlessui/react"
      via: "Listbox component"
      pattern: "import.*Listbox.*from.*@headlessui/react"
    - from: "src/components/filters/date-range-picker.tsx"
      to: "react-day-picker"
      via: "DayPicker component"
      pattern: "import.*DayPicker.*from.*react-day-picker"
---

<objective>
Create reusable filter components for the tracking data pages.

Purpose: Build the sticky filter bar and all filter controls (search, platform, date range, page size) that will be used on accounts and posts pages. These components follow CONTEXT.md decisions for instant filtering and Headless UI accessibility.

Output: Complete filter component suite in src/components/filters/ directory.
</objective>

<execution_context>
@/Users/gabrielleal/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gabrielleal/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-tracking-data-display/03-CONTEXT.md
@.planning/phases/03-tracking-data-display/03-RESEARCH.md

# Use debounce hook from Plan 01
@src/hooks/use-debounce.ts

# Existing patterns for styling
@src/lib/utils.ts
@src/components/guild-switcher.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FilterBar container and SearchInput</name>
  <files>
    src/components/filters/filter-bar.tsx
    src/components/filters/search-input.tsx
  </files>
  <action>
1. Create src/components/filters/filter-bar.tsx:
   - Sticky positioning at top (sticky top-0 z-10)
   - Backdrop blur with semi-transparent background
   - Pattern from 03-RESEARCH.md Pattern 4
   - Accept children prop for filter controls
   - Flexbox layout with gap-3, wrap for mobile

```tsx
export function FilterBar({ children }: { children: React.ReactNode }) {
  return (
    <div className="sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 py-4 -mx-4 px-4 border-b border-border">
      <div className="flex flex-wrap gap-3 items-center">
        {children}
      </div>
    </div>
  )
}
```

2. Create src/components/filters/search-input.tsx:
   - Uses useDebounce hook from Plan 01
   - 300ms debounce delay (per RESEARCH.md)
   - Magnifying glass icon
   - Placeholder text customizable
   - onChange callback receives debounced value
   - Dark theme styling matching existing inputs

Interface:
```tsx
interface SearchInputProps {
  value: string
  onChange: (value: string) => void
  placeholder?: string
}
```
  </action>
  <verify>
- FilterBar is sticky when scrolling
- SearchInput delays onChange callback by 300ms
  </verify>
  <done>FilterBar and SearchInput components ready for page integration</done>
</task>

<task type="auto">
  <name>Task 2: Create PlatformSelect and PageSizeSelect</name>
  <files>
    src/components/filters/platform-select.tsx
    src/components/filters/page-size-select.tsx
  </files>
  <action>
1. Create src/components/filters/platform-select.tsx:
   - Use Headless UI Listbox (already installed)
   - Options: All Platforms, Instagram, TikTok, YouTube, X
   - Pattern from 03-RESEARCH.md Code Examples
   - ARIA-compliant with keyboard navigation
   - Dark theme styling (bg-surface, border-border)
   - py-3 touch targets (per DEV-014)
   - Chevron icon for dropdown indicator
   - Check icon for selected item

Interface:
```tsx
interface PlatformSelectProps {
  value: string  // '' for all, or specific platform
  onChange: (value: string) => void
}
```

2. Create src/components/filters/page-size-select.tsx:
   - Simple Headless UI Listbox
   - Options: 25, 50, 100
   - Shows "Show X" format in button
   - Persists selection to localStorage (key: 'tracking-page-size')
   - Reads initial value from localStorage or defaults to 50

Interface:
```tsx
interface PageSizeSelectProps {
  value: number
  onChange: (value: number) => void
}
```
  </action>
  <verify>
- PlatformSelect opens with click and keyboard
- Selecting platform calls onChange with correct value
- PageSizeSelect persists to localStorage
  </verify>
  <done>Platform and page size dropdowns accessible and functional</done>
</task>

<task type="auto">
  <name>Task 3: Create DateRangePicker and barrel export</name>
  <files>
    src/components/filters/date-range-picker.tsx
    src/components/filters/index.ts
  </files>
  <action>
1. Create src/components/filters/date-range-picker.tsx:
   - Use react-day-picker with mode="range"
   - Pattern from 03-RESEARCH.md Code Examples
   - Button shows formatted range or "Select dates"
   - Calendar opens as dropdown/popover
   - Auto-close when both dates selected
   - Dark theme classNames overrides
   - date-fns for formatting (format from date-fns)
   - Include "Clear" button when range is set

Interface:
```tsx
import type { DateRange } from 'react-day-picker'

interface DateRangePickerProps {
  value: DateRange | undefined
  onChange: (range: DateRange | undefined) => void
}
```

Dark theme classNames example:
```tsx
classNames={{
  root: 'text-gray-300',
  day: 'hover:bg-background rounded',
  selected: 'bg-accent-purple text-white',
  range_middle: 'bg-accent-purple/20',
  // ... etc
}}
```

2. Create src/components/filters/index.ts barrel export:
```tsx
export { FilterBar } from './filter-bar'
export { SearchInput } from './search-input'
export { PlatformSelect } from './platform-select'
export { DateRangePicker } from './date-range-picker'
export { PageSizeSelect } from './page-size-select'
```
  </action>
  <verify>
- DateRangePicker opens calendar on click
- Selecting range updates value and closes calendar
- All components importable from '@/components/filters'
  </verify>
  <done>Complete filter component suite with barrel export</done>
</task>

</tasks>

<verification>
1. Run `npm run build` - no TypeScript errors
2. All filter components render in isolation
3. Headless UI components have keyboard navigation
4. DateRangePicker calendar displays with dark theme
</verification>

<success_criteria>
- FilterBar sticks to top during scroll
- SearchInput debounces by 300ms
- PlatformSelect shows all platforms with Headless UI
- DateRangePicker allows range selection with calendar
- PageSizeSelect offers 25/50/100 with localStorage persistence
- All components export from @/components/filters
</success_criteria>

<output>
After completion, create `.planning/phases/03-tracking-data-display/03-02-SUMMARY.md`
</output>
